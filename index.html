            <div class="platform-card tiktok" data-platform="tiktok" onclick="selectPlatform('tiktok')">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üéµ</div>
                <div class="platform-name">TikTok Live</div>
                <div class="platform-status">Click to Connect</div>
            </div>

            <div class="platform-card instagram" data-platform="instagram" onclick="selectPlatform('instagram')">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üì∑</div>
                <div class="platform-name">Instagram Live</div>
                <div class="platform-status">Click to Connect</div>
            </div>

            <div class="platform-card twitch" data-platform="twitch" onclick="selectPlatform('twitch')">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üü£</div>
                <div class="platform-name">Twitch</div>
                <div class="platform-status">Click to Connect</div>
            </div>

            <div id="streamSettings" style="display: none; background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 1.5rem; margin: 1rem 0;">
                <h3 style="color: #00d4ff; margin-bottom: 1rem;">üìã Stream Settings</h3>
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; color: white; margin-bottom: 0.5rem; font-weight: 500;">Stream Title</label>
                    <input type="text" id="streamTitle" placeholder="Enter your stream title..." style="width: 100%; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 0.8rem; color: white; font-size: 1rem;">
                </div>
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; color: white; margin-bottom: 0.5rem; font-weight: 500;">Description</label>
                    <textarea id="streamDescription" rows="3" placeholder="Describe your stream..." style="width: 100%; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 0.8rem; color: white; font-size: 1rem; resize: vertical;"></textarea>
                </div>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button id="startStreamBtn" onclick="startStream()" style="display: none; background: linear-gradient(135deg, #ff4757, #c44569); border: none; color: white; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    üî¥ Start Streaming
                </button>
                <button id="stopStreamBtn" onclick="stopStream()" style="display: none; background: linear-gradient(135deg, #4CAF50, #45a049); border: none; color: white; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; animation: pulse 2s infinite;">
                    ‚èπÔ∏è Stop Stream
                </button>
            </div>

            <div id="liveStatus" style="display: none; text-align: center; margin-top: 1rem;">
                <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: #ff4757; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; font-weight: 600; animation: pulse 2s infinite;">
                    <div style="width: 8px; height: 8px; background: white; border-radius: 50%; animation: pulse-dot 1s infinite;"></div>
                    LIVE ON <span id="livePlatform"></span>
                </div>
                <p style="margin-top: 1rem; color: rgba(255, 255, 255, 0.7);">
                    üé¨ Teleprompter is active! Use voice commands to control scrolling.
                </p>
            </div>
        </div>
    </div>

    <script>
        class ProfessionalTeleprompter {
            constructor() {
                this.isPlaying = false;
                this.scrollPosition = 0;
                this.scrollSpeed = 1;
                this.recognition = null;
                this.isListening = false;
                this.isMirrored = false;
                this.isTransparent = false;
                this.isFullscreen = false;
                this.currentLanguage = 'en-US';
                this.currentPlatform = 'general';
                this.startTime = null;
                this.animationFrame = null;
                this.sidebarVisible = window.innerWidth > 768;
                this.user = null;
                this.isLoggedIn = false;
                this.cloudSyncEnabled = false;
                this.isStreaming = false;
                this.selectedPlatform = null;
                
                this.initializeElements();
                this.setupEventListeners();
                this.initializeSpeechRecognition();
                this.setupLanguageCommands();
                this.updateDisplay();
                this.startTimer();
                this.loadSavedData();
            }

            initializeElements() {
                this.elements = {
                    sidebar: document.getElementById('sidebar'),
                    toggleSidebar: document.getElementById('toggleSidebar'),
                    scriptInput: document.getElementById('scriptInput'),
                    teleprompterText: document.getElementById('teleprompterText'),
                    teleprompterScreen: document.getElementById('teleprompterScreen'),
                    languageSelect: document.getElementById('languageSelect'),
                    platformSelect: document.getElementById('platformSelect'),
                    voiceBtn: document.getElementById('voiceBtn'),
                    playBtn: document.getElementById('playBtn'),
                    pauseBtn: document.getElementById('pauseBtn'),
                    resetBtn: document.getElementById('resetBtn'),
                    mirrorBtn: document.getElementById('mirrorBtn'),
                    transparentBtn: document.getElementById('transparentBtn'),
                    fullscreenBtn: document.getElementById('fullscreenBtn'),
                    streamBtn: document.getElementById('streamBtn'),
                    speedSlider: document.getElementById('speedSlider'),
                    speedDisplay: document.getElementById('speedDisplay'),
                    timerDisplay: document.getElementById('timerDisplay'),
                    voiceStatus: document.getElementById('voiceStatus'),
                    playStatus: document.getElementById('playStatus'),
                    recordStatus: document.getElementById('recordStatus'),
                    commandsGrid: document.getElementById('commandsGrid'),
                    mainContainer: document.getElementById('mainContainer'),
                    importBtn: document.getElementById('importBtn'),
                    exportBtn: document.getElementById('exportBtn'),
                    clearBtn: document.getElementById('clearBtn'),
                    saveBtn: document.getElementById('saveBtn'),
                    
                    // Login elements
                    loginBtn: document.getElementById('loginBtn'),
                    loginModal: document.getElementById('loginModal'),
                    closeLogin: document.getElementById('closeLogin'),
                    userSection: document.getElementById('userSection'),
                    cloudStatus: document.getElementById('cloudStatus'),
                    cloudDot: document.getElementById('cloudDot'),
                    cloudText: document.getElementById('cloudText'),
                    googleLogin: document.getElementById('googleLogin'),
                    facebookLogin: document.getElementById('facebookLogin'),
                    appleLogin: document.getElementById('appleLogin'),
                    
                    // Streaming elements
                    streamModal: document.getElementById('streamModal'),
                    closeStream: document.getElementById('closeStream'),
                    streamSettings: document.getElementById('streamSettings'),
                    streamTitle: document.getElementById('streamTitle'),
                    streamDescription: document.getElementById('streamDescription'),
                    startStreamBtn: document.getElementById('startStreamBtn'),
                    stopStreamBtn: document.getElementById('stopStreamBtn'),
                    liveStatus: document.getElementById('liveStatus'),
                    livePlatform: document.getElementById('livePlatform')
                };
            }

            setupEventListeners() {
                // Script and UI controls
                this.elements.scriptInput.addEventListener('input', () => this.updateScript());
                this.elements.toggleSidebar.addEventListener('click', () => this.toggleSidebar());
                this.elements.languageSelect.addEventListener('change', (e) => this.changeLanguage(e.target.value));
                this.elements.platformSelect.addEventListener('change', (e) => this.changePlatform(e.target.value));
                
                // Playback controls
                this.elements.voiceBtn.addEventListener('click', () => this.toggleVoiceControl());
                this.elements.playBtn.addEventListener('click', () => this.play());
                this.elements.pauseBtn.addEventListener('click', () => this.pause());
                this.elements.resetBtn.addEventListener('click', () => this.reset());
                this.elements.mirrorBtn.addEventListener('click', () => this.toggleMirror());
                this.elements.transparentBtn.addEventListener('click', () => this.toggleTransparent());
                this.elements.fullscreenBtn.addEventListener('click', () => this.toggleFullscreen());
                this.elements.streamBtn.addEventListener('click', () => this.showStreamModal());
                this.elements.speedSlider.addEventListener('input', (e) => this.updateSpeed(e.target.value));

                // Script management
                this.elements.importBtn.addEventListener('click', () => this.importScript());
                this.elements.exportBtn.addEventListener('click', () => this.exportScript());
                this.elements.clearBtn.addEventListener('click', () => this.clearScript());
                this.elements.saveBtn.addEventListener('click', () => this.saveScript());

                // Login functionality
                this.elements.loginBtn.addEventListener('click', () => this.showLoginModal());
                this.elements.closeLogin.addEventListener('click', () => this.hideLoginModal());
                this.elements.loginModal.addEventListener('click', (e) => {
                    if (e.target === this.elements.loginModal) this.hideLoginModal();
                });
                
                // Social login buttons
                this.elements.googleLogin.addEventListener('click', () => this.socialLogin('google'));
                this.elements.facebookLogin.addEventListener('click', () => this.socialLogin('facebook'));
                this.elements.appleLogin.addEventListener('click', () => this.socialLogin('apple'));

                // Streaming functionality
                // Streaming functionality - Add debug info and make sure elements exist
                console.log('Setting up streaming functionality...');
                
                // Re-find streaming elements if not found initially
                if (!this.elements.streamModal) {
                    this.elements.streamModal = document.getElementById('streamModal');
                }
                if (!this.elements.closeStream) {
                    this.elements.closeStream = document.getElementById('closeStream');
                }
                if (!this.elements.startStreamBtn) {
                    this.elements.startStreamBtn = document.getElementById('startStreamBtn');
                }
                if (!this.elements.stopStreamBtn) {
                    this.elements.stopStreamBtn = document.getElementById('stopStreamBtn');
                }
                if (!this.elements.streamSettings) {
                    this.elements.streamSettings = document.getElementById('streamSettings');
                }
                if (!this.elements.liveStatus) {
                    this.elements.liveStatus = document.getElementById('liveStatus');
                }
                if (!this.elements.livePlatform) {
                    this.elements.livePlatform = document.getElementById('livePlatform');
                }
                if (!this.elements.streamTitle) {
                    this.elements.streamTitle = document.getElementById('streamTitle');
                }
                if (!this.elements.streamDescription) {
                    this.elements.streamDescription = document.getElementById('streamDescription');
                }

                if (this.elements.streamBtn) {
                    this.elements.streamBtn.addEventListener('click', () => {
                        console.log('Stream button clicked!'); // Debug log
                        this.showStreamModal();
                    });
                    console.log('Stream button event listener attached successfully');
                } else {
                    console.error('Stream button not found!');
                }
                
                if (this.elements.closeStream) {
                    this.elements.closeStream.addEventListener('click', () => this.hideStreamModal());
                    console.log('Close stream button event listener attached');
                }
                
                if (this.elements.streamModal) {
                    this.elements.streamModal.addEventListener('click', (e) => {
                        if (e.target === this.elements.streamModal) this.hideStreamModal();
                    });
                    console.log('Stream modal event listener attached');
                }
                
                if (this.elements.startStreamBtn) {
                    this.elements.startStreamBtn.addEventListener('click', () => this.startStream());
                    console.log('Start stream button event listener attached');
                }
                
                if (this.elements.stopStreamBtn) {
                    this.elements.stopStreamBtn.addEventListener('click', () => this.stopStream());
                    console.log('Stop stream button event listener attached');
                }

                // Platform selection
                document.querySelectorAll('.platform-card').forEach(card => {
                    card.addEventListener('click', () => this.selectPlatform(card.dataset.platform));
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.target === this.elements.scriptInput) return;
                    
                    switch(e.code) {
                        case 'Space':
                            e.preventDefault();
                            this.isPlaying ? this.pause() : this.play();
                            break;
                        case 'ArrowUp':
                            e.preventDefault();
                            this.scroll(-50);
                            break;
                        case 'ArrowDown':
                            e.preventDefault();
                            this.scroll(50);
                            break;
                        case 'Home':
                            e.preventDefault();
                            this.reset();
                            break;
                    }
                });

                // Fullscreen events
                document.addEventListener('fullscreenchange', () => this.handleFullscreenChange());
                
                // Window resize
                window.addEventListener('resize', () => this.handleResize());
            }

            initializeSpeechRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    
                    this.recognition.continuous = true;
                    this.recognition.interimResults = false;
                    this.recognition.lang = this.currentLanguage;
                    
                    this.recognition.onstart = () => {
                        this.isListening = true;
                        this.updateVoiceStatus();
                    };
                    
                    this.recognition.onend = () => {
                        if (this.elements.voiceBtn.classList.contains('active')) {
                            setTimeout(() => {
                                try { this.recognition.start(); } catch(e) {}
                            }, 100);
                        } else {
                            this.isListening = false;
                            this.updateVoiceStatus();
                        }
                    };
                    
                    this.recognition.onresult = (event) => {
                        const lastResult = event.results[event.results.length - 1];
                        if (lastResult.isFinal) {
                            const command = lastResult[0].transcript.toLowerCase().trim();
                            this.processVoiceCommand(command);
                        }
                    };

                    this.recognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        if (event.error === 'not-allowed') {
                            this.showNotification('üé§ Microphone access denied. Please allow microphone access.');
                            this.stopVoiceControl();
                        }
                    };
                } else {
                    this.elements.voiceBtn.disabled = true;
                    this.elements.voiceBtn.textContent = 'üé§ Not Supported';
                }
            }

            setupLanguageCommands() {
                this.commands = {
                    'en-US': {
                        play: ['play', 'start', 'begin', 'go', 'resume'],
                        pause: ['pause', 'stop', 'halt', 'wait'],
                        faster: ['faster', 'speed up', 'quick', 'accelerate'],
                        slower: ['slower', 'slow down', 'decelerate'],
                        scrollUp: ['scroll up', 'up', 'back', 'previous'],
                        scrollDown: ['scroll down', 'down', 'forward', 'next'],
                        reset: ['reset', 'restart', 'beginning', 'start over', 'top'],
                        mirror: ['mirror', 'flip', 'reverse'],
                        transparent: ['transparent', 'overlay', 'see through'],
                        goLive: ['go live', 'start stream', 'begin streaming']
                    },
                    'ar-SA': {
                        play: ['ÿ™ÿ¥ÿ∫ŸäŸÑ', 'ÿßÿ®ÿØÿ£', 'ÿßÿ≥ÿ™ÿ£ŸÜŸÅ', 'ÿ¥ÿ∫ŸÑ'],
                        pause: ['ÿ™ŸàŸÇŸÅ', 'ÿ•ŸäŸÇÿßŸÅ', 'ŸÇŸÅ', 'ÿßÿ≥ÿ™ÿ±ÿßÿ≠ÿ©'],
                        faster: ['ÿ£ÿ≥ÿ±ÿπ', 'ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ≥ÿ±ÿπÿ©', 'ÿπÿ¨ŸÑ'],
                        slower: ['ÿ£ÿ®ÿ∑ÿ£', 'ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ≥ÿ±ÿπÿ©', 'ÿ®ÿ∑ÿ°'],
                        scrollUp: ['ÿ™ŸÖÿ±Ÿäÿ± ŸÑÿ£ÿπŸÑŸâ', 'ŸÅŸàŸÇ', 'ŸÑŸÑÿ£ÿπŸÑŸâ', 'ÿßÿ±ÿ¨ÿπ'],
                        scrollDown: ['ÿ™ŸÖÿ±Ÿäÿ± ŸÑÿ£ÿ≥ŸÅŸÑ', 'ÿ™ÿ≠ÿ™', 'ŸÑŸÑÿ£ÿ≥ŸÅŸÑ', 'ÿ™ŸÇÿØŸÖ'],
                        reset: ['ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ', 'ÿßŸÑÿ®ÿØÿßŸäÿ©', 'ŸÖŸÜ ÿ¨ÿØŸäÿØ', 'ÿ•ÿπÿßÿØÿ©'],
                        mirror: ['ŸÖÿ±ÿ¢ÿ©', 'ÿßŸÜÿπŸÉÿßÿ≥', 'ÿßŸÇŸÑÿ®'],
                        transparent: ['ÿ¥ŸÅÿßŸÅ', 'ÿ∑ÿ®ŸÇÿ© ÿπŸÑŸàŸäÿ©', 'ÿ∫Ÿäÿ± ŸÖÿ±ÿ¶Ÿä'],
                        goLive: ['ÿ®ÿ´ ŸÖÿ®ÿßÿ¥ÿ±', 'ÿßÿ®ÿØÿ£ ÿßŸÑÿ®ÿ´', 'ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ®ÿ´']
                    }
                };
            }

            processVoiceCommand(command) {
                const currentCommands = this.commands[this.currentLanguage];
                
                for (const [action, phrases] of Object.entries(currentCommands)) {
                    if (phrases.some(phrase => command.includes(phrase))) {
                        switch (action) {
                            case 'play': this.play(); break;
                            case 'pause': this.pause(); break;
                            case 'faster': this.adjustSpeed(0.2); break;
                            case 'slower': this.adjustSpeed(-0.2); break;
                            case 'scrollUp': this.scroll(-100); break;
                            case 'scrollDown': this.scroll(100); break;
                            case 'reset': this.reset(); break;
                            case 'mirror': this.toggleMirror(); break;
                            case 'transparent': this.toggleTransparent(); break;
                            case 'goLive': this.showStreamModal(); break;
                        }
                        
                        this.showNotification(`üé§ "${command}"`);
                        return;
                    }
                }
            }

            changeLanguage(language) {
                this.currentLanguage = language;
                
                if (this.recognition) {
                    this.recognition.lang = language;
                    if (this.isListening) {
                        this.stopVoiceControl();
                        setTimeout(() => this.startVoiceControl(), 100);
                    }
                }
                
                const isArabic = language === 'ar-SA';
                if (isArabic) {
                    this.elements.teleprompterText.classList.add('arabic');
                    this.elements.scriptInput.classList.add('arabic');
                } else {
                    this.elements.teleprompterText.classList.remove('arabic');
                    this.elements.scriptInput.classList.remove('arabic');
                }
                
                this.updateCommandsDisplay();
            }

            changePlatform(platform) {
                this.currentPlatform = platform;
                
                // Remove existing theme classes
                document.body.classList.remove('themed', 'youtube-theme', 'facebook-theme', 'tiktok-theme', 'instagram-theme', 'twitch-theme');
                
                if (platform !== 'general') {
                    document.body.classList.add('themed', `${platform}-theme`);
                }
                
                const tips = {
                    youtube: 'üì∫ YouTube optimized: Perfect for tutorials and long-form content',
                    facebook: 'üìò Facebook Live ready: Great for community engagement',
                    tiktok: 'üéµ TikTok optimized: Short, punchy content works best',
                    instagram: 'üì∑ Instagram ready: Perfect for stories and IGTV',
                    twitch: 'üü£ Twitch streaming: Ideal for gaming and live interaction'
                };
                
                if (tips[platform]) {
                    this.showNotification(tips[platform]);
                }
            }

            updateCommandsDisplay() {
                const isArabic = this.currentLanguage === 'ar-SA';
                
                if (isArabic) {
                    this.elements.commandsGrid.innerHTML = `
                        <div class="command-item"><strong>"ÿ™ÿ¥ÿ∫ŸäŸÑ"</strong> ÿ®ÿØÿ°</div>
                        <div class="command-item"><strong>"ÿ™ŸàŸÇŸÅ"</strong> ÿ•ŸäŸÇÿßŸÅ</div>
                        <div class="command-item"><strong>"ÿ£ÿ≥ÿ±ÿπ"</strong> ÿ™ÿ≥ÿ±Ÿäÿπ</div>
                        <div class="command-item"><strong>"ÿ£ÿ®ÿ∑ÿ£"</strong> ÿ™ÿ®ÿ∑Ÿäÿ°</div>
                        <div class="command-item"><strong>"ŸÅŸàŸÇ"</strong> ŸÑŸÑÿ£ÿπŸÑŸâ</div>
                        <div class="command-item"><strong>"ÿ™ÿ≠ÿ™"</strong> ŸÑŸÑÿ£ÿ≥ŸÅŸÑ</div>
                        <div class="command-item"><strong>"ÿ•ÿπÿßÿØÿ©"</strong> ÿßŸÑÿ®ÿØÿßŸäÿ©</div>
                        <div class="command-item"><strong>"ŸÖÿ±ÿ¢ÿ©"</strong> ÿßŸÜÿπŸÉÿßÿ≥</div>
                    `;
                } else {
                    this.elements.commandsGrid.innerHTML = `
                        <div class="command-item"><strong>"play"</strong> Start</div>
                        <div class="command-item"><strong>"pause"</strong> Stop</div>
                        <div class="command-item"><strong>"faster"</strong> Speed up</div>
                        <div class="command-item"><strong>"slower"</strong> Slow down</div>
                        <div class="command-item"><strong>"up"</strong> Scroll up</div>
                        <div class="command-item"><strong>"down"</strong> Scroll down</div>
                        <div class="command-item"><strong>"reset"</strong> Beginning</div>
                        <div class="command-item"><strong>"mirror"</strong> Flip text</div>
                    `;
                }
            }

            toggleSidebar() {
                this.sidebarVisible = !this.sidebarVisible;
                if (this.sidebarVisible) {
                    this.elements.sidebar.classList.add('visible');
                    this.elements.toggleSidebar.textContent = '‚úï Close';
                } else {
                    this.elements.sidebar.classList.remove('visible');
                    this.elements.toggleSidebar.textContent = 'üìù Script';
                }
            }

            toggleVoiceControl() {
                if (this.elements.voiceBtn.classList.contains('active')) {
                    this.stopVoiceControl();
                } else {
                    this.startVoiceControl();
                }
            }

            startVoiceControl() {
                if (this.recognition) {
                    try {
                        this.recognition.start();
                        this.elements.voiceBtn.classList.add('active');
                        this.elements.voiceBtn.textContent = 'üé§ Listening...';
                        this.showNotification('üé§ Voice control activated');
                    } catch (error) {
                        console.error('Failed to start voice recognition:', error);
                    }
                }
            }

            stopVoiceControl() {
                if (this.recognition) {
                    this.recognition.stop();
                    this.isListening = false;
                    this.elements.voiceBtn.classList.remove('active');
                    this.elements.voiceBtn.textContent = 'üé§ Voice Control';
                    this.updateVoiceStatus();
                    this.showNotification('üé§ Voice control deactivated');
                }
            }

            play() {
                this.isPlaying = true;
                this.elements.playBtn.classList.add('active');
                this.elements.pauseBtn.classList.remove('active');
                this.elements.playStatus.classList.add('active');
                
                if (!this.startTime) {
                    this.startTime = Date.now();
                }
                
                this.startScrolling();
                this.showNotification('‚ñ∂Ô∏è Playing');
            }

            pause() {
                this.isPlaying = false;
                this.elements.playBtn.classList.remove('active');
                this.elements.pauseBtn.classList.add('active');
                this.elements.playStatus.classList.remove('active');
                
                if (this.animationFrame) {
                    cancelAnimationFrame(this.animationFrame);
                }
                
                this.showNotification('‚è∏Ô∏è Paused');
            }

            reset() {
                this.isPlaying = false;
                this.scrollPosition = 0;
                this.startTime = null;
                this.elements.playBtn.classList.remove('active');
                this.elements.pauseBtn.classList.remove('active');
                this.elements.playStatus.classList.remove('active');
                this.updateDisplay();
                this.showNotification('üîÑ Reset to beginning');
            }

            toggleMirror() {
                this.isMirrored = !this.isMirrored;
                if (this.isMirrored) {
                    this.elements.teleprompterScreen.classList.add('mirror-mode');
                    this.elements.mirrorBtn.classList.add('active');
                    this.elements.mirrorBtn.textContent = 'ü™û Mirror ON';
                    this.showNotification('ü™û Mirror mode enabled');
                } else {
                    this.elements.teleprompterScreen.classList.remove('mirror-mode');
                    this.elements.mirrorBtn.classList.remove('active');
                    this.elements.mirrorBtn.textContent = 'ü™û Mirror';
                    this.showNotification('ü™û Mirror mode disabled');
                }
            }

            toggleTransparent() {
                this.isTransparent = !this.isTransparent;
                if (this.isTransparent) {
                    this.elements.teleprompterScreen.classList.add('transparent-mode');
                    this.elements.transparentBtn.classList.add('active');
                    this.elements.transparentBtn.textContent = 'üëª Transparent ON';
                    this.showNotification('üëª Transparent mode: Perfect for OBS overlay!');
                } else {
                    this.elements.teleprompterScreen.classList.remove('transparent-mode');
                    this.elements.transparentBtn.classList.remove('active');
                    this.elements.transparentBtn.textContent = 'üëª Transparent';
                    this.showNotification('üëª Normal mode restored');
                }
            }

            toggleFullscreen() {
                if (!this.isFullscreen) {
                    this.elements.mainContainer.requestFullscreen();
                } else {
                    document.exitFullscreen();
                }
            }

            handleFullscreenChange() {
                this.isFullscreen = !!document.fullscreenElement;
                if (this.isFullscreen) {
                    this.elements.mainContainer.classList.add('fullscreen-mode');
                    this.elements.fullscreenBtn.textContent = '‚õ∂ Exit Fullscreen';
                    this.showNotification('‚õ∂ Fullscreen mode activated');
                } else {
                    this.elements.mainContainer.classList.remove('fullscreen-mode');
                    this.elements.fullscreenBtn.textContent = '‚õ∂ Fullscreen';
                    this.showNotification('‚õ∂ Windowed mode restored');
                }
            }

            scroll(pixels) {
                this.scrollPosition += pixels;
                this.scrollPosition = Math.max(0, this.scrollPosition);
                this.updateDisplay();
            }

            adjustSpeed(delta) {
                this.scrollSpeed = Math.max(0.1, Math.min(5, this.scrollSpeed + delta));
                this.elements.speedSlider.value = this.scrollSpeed;
                this.updateSpeedDisplay();
                this.showNotification(`üèÉ Speed: ${this.scrollSpeed.toFixed(1)}x`);
            }

            updateSpeed(value) {
                this.scrollSpeed = parseFloat(value);
                this.updateSpeedDisplay();
            }

            updateSpeedDisplay() {
                this.elements.speedDisplay.textContent = this.scrollSpeed.toFixed(1) + 'x';
            }

            updateScript() {
                this.elements.teleprompterText.textContent = this.elements.scriptInput.value || 
                    'Enter your script to get started...';
                this.reset();
            }

            startScrolling() {
                if (!this.isPlaying) return;
                
                this.scrollPosition += this.scrollSpeed * 0.5;
                this.updateDisplay();
                
                this.animationFrame = requestAnimationFrame(() => this.startScrolling());
            }

            updateDisplay() {
                this.elements.teleprompterText.style.transform = `translateY(-${this.scrollPosition}px)`;
            }

            updateVoiceStatus() {
                if (this.isListening) {
                    this.elements.voiceStatus.classList.add('active');
                } else {
                    this.elements.voiceStatus.classList.remove('active');
                }
            }

            startTimer() {
                setInterval(() => {
                    if (this.isPlaying && this.startTime) {
                        const elapsed = Math.floor((Date.now() - this.startTime) / 1000);
                        const minutes = Math.floor(elapsed / 60);
                        const seconds = elapsed % 60;
                        this.elements.timerDisplay.textContent = 
                            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    }
                }, 1000);
            }

            handleResize() {
                if (window.innerWidth <= 768) {
                    this.elements.sidebar.classList.remove('visible');
                    this.sidebarVisible = false;
                    this.elements.toggleSidebar.textContent = 'üìù Script';
                }
            }

            // Script Management Functions
            importScript() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.txt,.doc,.docx,.pdf,.rtf';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.elements.scriptInput.value = e.target.result;
                            this.updateScript();
                            this.showNotification(`üìÅ Imported: ${file.name}`);
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }

            exportScript() {
                const text = this.elements.scriptInput.value;
                if (!text.trim()) {
                    this.showNotification('‚ö†Ô∏è No script to export');
                    return;
                }
                
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'teleprompter-script.txt';
                a.click();
                URL.revokeObjectURL(url);
                this.showNotification('üíæ Script exported');
            }

            clearScript() {
                if (confirm('Clear the current script?')) {
                    this.elements.scriptInput.value = '';
                    this.updateScript();
                    this.showNotification('üóëÔ∏è Script cleared');
                }
            }

            saveScript() {
                const script = this.elements.scriptInput.value;
                if (script.trim()) {
                    const data = {
                        script: script,
                        settings: {
                            speed: this.scrollSpeed,
                            language: this.currentLanguage,
                            platform: this.currentPlatform,
                            mirrored: this.isMirrored
                        },
                        timestamp: new Date().toISOString()
                    };
                    
                    localStorage.setItem('teleprompter-data', JSON.stringify(data));
                    this.showNotification('üíæ Script and settings saved');
                    
                    if (this.cloudSyncEnabled) {
                        this.syncScriptToCloud();
                    }
                }
            }

            loadSavedData() {
                const data = localStorage.getItem('teleprompter-data');
                if (data) {
                    try {
                        const parsed = JSON.parse(data);
                        
                        if (parsed.script) {
                            this.elements.scriptInput.value = parsed.script;
                            this.updateScript();
                        }
                        
                        if (parsed.settings) {
                            const settings = parsed.settings;
                            
                            if (settings.speed) {
                                this.scrollSpeed = settings.speed;
                                this.elements.speedSlider.value = settings.speed;
                                this.updateSpeedDisplay();
                            }
                            
                            if (settings.language) {
                                this.elements.languageSelect.value = settings.language;
                                this.changeLanguage(settings.language);
                            }
                            
                            if (settings.platform) {
                                this.elements.platformSelect.value = settings.platform;
                                this.changePlatform(settings.platform);
                            }
                            
                            if (settings.mirrored && !this.isMirrored) {
                                this.toggleMirror();
                            }
                        }
                        
                        // Check for user data
                        const userData = localStorage.getItem('teleprompter-user');
                        if (userData) {
                            const user = JSON.parse(userData);
                            this.user = user;
                            this.isLoggedIn = true;
                            this.cloudSyncEnabled = true;
                            this.updateUserInterface();
                            this.updateCloudStatus('synced');
                        }
                        
                    } catch (e) {
                        console.error('Error loading saved data:', e);
                    }
                }
            }

            // Login and Social Media Integration
            showLoginModal() {
                this.elements.loginModal.classList.add('show');
            }

            hideLoginModal() {
                this.elements.loginModal.classList.remove('show');
            }

            socialLogin(provider) {
                this.showNotification(`üîê Connecting to ${provider.charAt(0).toUpperCase() + provider.slice(1)}...`);
                
                // Simulate login process
                setTimeout(() => {
                    this.simulateLogin(provider);
                }, 1500);
            }

            simulateLogin(provider) {
                const userData = {
                    google: { name: 'John Creator', avatar: 'JC', email: 'john@gmail.com', provider: 'google' },
                    facebook: { name: 'Jane Smith', avatar: 'JS', email: 'jane@facebook.com', provider: 'facebook' },
                    apple: { name: 'Mike Johnson', avatar: 'MJ', email: 'mike@icloud.com', provider: 'apple' }
                };

                this.user = userData[provider];
                this.isLoggedIn = true;
                this.cloudSyncEnabled = true;
                
                localStorage.setItem('teleprompter-user', JSON.stringify(this.user));
                
                this.updateUserInterface();
                this.hideLoginModal();
                this.showNotification(`‚úÖ Successfully signed in with ${provider.charAt(0).toUpperCase() + provider.slice(1)}`);
                
                this.enableCloudSync();
            }

            updateUserInterface() {
                if (this.isLoggedIn && this.user) {
                    this.elements.userSection.innerHTML = `
                        <div class="user-profile">
                            <div class="user-avatar">${this.user.avatar}</div>
                            <span>${this.user.name.split(' ')[0]}</span>
                            <button class="btn" onclick="teleprompter.logout()" style="padding: 0.3rem 0.6rem; margin-left: 0.5rem; font-size: 0.8rem;">Sign Out</button>
                        </div>
                    `;
                } else {
                    this.elements.userSection.innerHTML = `
                        <button class="btn" id="loginBtn">üë§ Sign In</button>
                    `;
                    // Re-attach event listener
                    document.getElementById('loginBtn').addEventListener('click', () => this.showLoginModal());
                }
            }

            logout() {
                this.user = null;
                this.isLoggedIn = false;
                this.cloudSyncEnabled = false;
                localStorage.removeItem('teleprompter-user');
                this.updateUserInterface();
                this.updateCloudStatus('offline');
                this.showNotification('üëã Signed out successfully');
            }

            enableCloudSync() {
                this.updateCloudStatus('syncing');
                
                setTimeout(() => {
                    this.updateCloudStatus('synced');
                    this.showNotification('‚òÅÔ∏è Scripts synced to cloud');
                    this.syncScriptToCloud();
                }, 2000);
            }

            updateCloudStatus(status) {
                const statusMap = {
                    offline: { dot: 'offline', text: 'Offline Mode' },
                    syncing: { dot: 'syncing', text: 'Syncing...' },
                    synced: { dot: 'active', text: 'Cloud Synced' }
                };

                const config = statusMap[status];
                if (config) {
                    this.elements.cloudDot.className = `cloud-dot ${config.dot}`;
                    this.elements.cloudText.textContent = config.text;
                }
            }

            syncScriptToCloud() {
                if (this.cloudSyncEnabled && this.elements.scriptInput.value.trim()) {
                    const cloudData = {
                        script: this.elements.scriptInput.value,
                        settings: {
                            speed: this.scrollSpeed,
                            language: this.currentLanguage,
                            platform: this.currentPlatform,
                            mirrored: this.isMirrored
                        },
                        user: this.user,
                        timestamp: new Date().toISOString()
                    };
                    
                    localStorage.setItem('teleprompter-cloud-data', JSON.stringify(cloudData));
                }
            }

            // Live Streaming Functions
            showStreamModal() {
                console.log('showStreamModal called'); // Debug log
                if (this.elements.streamModal) {
                    this.elements.streamModal.classList.add('show');
                    console.log('Stream modal should be visible now'); // Debug log
                } else {
                    console.error('Stream modal element not found!');
                    // Fallback: try to find the element again
                    this.elements.streamModal = document.getElementById('streamModal');
                    if (this.elements.streamModal) {
                        this.elements.streamModal.classList.add('show');
                        console.log('Found stream modal on retry and showing it');
                    } else {
                        alert('Stream modal not found. Please refresh the page.');
                    }
                }
            }

            hideStreamModal() {
                this.elements.streamModal.classList.remove('show');
            }

            selectPlatform(platform) {
                // Remove previous selection
                document.querySelectorAll('.platform-card').forEach(card => {
                    card.classList.remove('selected');
                });

                // Select new platform
                const card = document.querySelector(`[data-platform="${platform}"]`);
                if (card) {
                    card.classList.add('selected');
                    this.selectedPlatform = platform;

                    // Show stream settings
                    this.elements.streamSettings.style.display = 'block';
                    this.elements.startStreamBtn.style.display = 'block';

                    // Connect to platform (simulate)
                    this.connectToPlatform(platform);
                }
            }

            connectToPlatform(platform) {
                const statusElement = document.querySelector(`[data-platform="${platform}"] .platform-status`);
                if (statusElement) {
                    statusElement.textContent = 'Connecting...';
                    
                    setTimeout(() => {
                        statusElement.textContent = '‚úÖ Connected';
                        statusElement.className = 'platform-status';
                        
                        // Set default stream title based on platform
                        const titles = {
                            youtube: 'Live Tutorial with Professional Teleprompter',
                            facebook: 'Going Live with my Community!',
                            tiktok: 'Live Stream - Ask Me Anything!',
                            instagram: 'Behind the Scenes Live Session',
                            twitch: 'Just Chatting - Professional Setup'
                        };
                        
                        if (this.elements.streamTitle) {
                            this.elements.streamTitle.value = titles[platform] || 'Professional Live Stream';
                        }
                        
                        this.showNotification(`‚úÖ Connected to ${platform.charAt(0).toUpperCase() + platform.slice(1)}`);
                    }, 2000);
                }
            }

            startStream() {
                if (!this.selectedPlatform) {
                    this.showNotification('‚ö†Ô∏è Please select a platform first');
                    return;
                }

                // Show loading
                this.elements.startStreamBtn.textContent = 'üîÑ Starting Stream...';
                this.elements.startStreamBtn.disabled = true;

                // Simulate stream start
                setTimeout(() => {
                    this.isStreaming = true;
                    this.updateStreamUI();
                    
                    // Update teleprompter for streaming mode
                    this.changePlatform(this.selectedPlatform);
                    this.elements.recordStatus.classList.add('recording');
                    
                    // Enable transparent mode for streaming
                    if (!this.isTransparent) {
                        this.toggleTransparent();
                    }
                    
                    this.showNotification(`üî¥ LIVE on ${this.selectedPlatform.toUpperCase()}!`);
                }, 3000);
            }

            stopStream() {
                if (confirm('Are you sure you want to stop the live stream?')) {
                    this.isStreaming = false;
                    this.updateStreamUI();
                    this.elements.recordStatus.classList.remove('recording');
                    this.showNotification('‚èπÔ∏è Stream stopped');
                }
            }

            updateStreamUI() {
                if (this.isStreaming) {
                    // Show live status
                    this.elements.liveStatus.style.display = 'block';
                    if (this.elements.livePlatform) {
                        this.elements.livePlatform.textContent = this.selectedPlatform.toUpperCase();
                    }
                    
                    // Hide start button, show stop button
                    this.elements.startStreamBtn.style.display = 'none';
                    this.elements.stopStreamBtn.style.display = 'block';
                    
                    // Update stream button in header
                    this.elements.streamBtn.classList.add('recording');
                    this.elements.streamBtn.textContent = 'üî¥ LIVE';
                    
                } else {
                    // Hide live status
                    this.elements.liveStatus.style.display = 'none';
                    
                    // Show start button, hide stop button
                    this.elements.startStreamBtn.style.display = 'block';
                    this.elements.startStreamBtn.textContent = 'üî¥ Start Streaming';
                    this.elements.startStreamBtn.disabled = false;
                    this.elements.stopStreamBtn.style.display = 'none';
                    
                    // Reset stream button in header
                    this.elements.streamBtn.classList.remove('recording');
                    this.elements.streamBtn.textContent = 'üî¥ Go Live';
                }
            }

            showNotification(message) {
                // Remove existing notification
                const existing = document.querySelector('.feedback-notification');
                if (existing) existing.remove();
                
                const notification = document.createElement('div');
                notification.className = 'feedback-notification';
                notification.textContent = message;
                document.body.appendChild(notification);
                
                // Show notification
                setTimeout(() => notification.classList.add('show'), 10);
                
                // Hide and remove notification
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
        }

        // Real Facebook Live Integration Configuration
        const SOCIAL_MEDIA_CONFIG = {
            facebook: {
                appId: 'YOUR_FACEBOOK_APP_ID', // Replace with your Facebook App ID
                redirectUri: window.location.origin + '/auth/facebook/callback',
                scopes: [
                    'pages_manage_posts',
                    'pages_read_engagement', 
                    'publish_video',
                    'pages_show_list'
                ],
                apiVersion: 'v18.0'
            },
            youtube: {
                clientId: 'YOUR_GOOGLE_CLIENT_ID', // Replace with your Google Client ID
                redirectUri: window.location.origin + '/auth/google/callback',
                scopes: [
                    'https://www.googleapis.com/auth/youtube',
                    'https://www.googleapis.com/auth/youtube.force-ssl'
                ]
            },
            // Add other platforms as needed
        };

        // Real Facebook Live API Integration
        class FacebookLiveAPI {
            constructor(config) {
                this.config = config;
                this.accessToken = null;
                this.pageAccessToken = null;
                this.selectedPageId = null;
            }

            // Step 1: Authenticate with Facebook
            authenticate() {
                const authUrl = `https://www.facebook.com/v${this.config.apiVersion}/dialog/oauth?` +
                    `client_id=${this.config.appId}&` +
                    `redirect_uri=${encodeURIComponent(this.config.redirectUri)}&` +
                    `scope=${this.config.scopes.join(',')}&` +
                    `response_type=code&` +
                    `state=${this.generateState()}`;

                // In a real app, you'd redirect to Facebook
                window.open(authUrl, 'facebook-auth', 'width=600,height=600');
                
                // Listen for auth completion (simplified)
                return this.waitForAuthCompletion();
            }

            // Step 2: Exchange code for access token
            async exchangeCodeForToken(authCode) {
                try {
                    const response = await fetch('/api/facebook/token', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            code: authCode,
                            redirect_uri: this.config.redirectUri
                        })
                    });

                    const data = await response.json();
                    this.accessToken = data.access_token;
                    return data;
                } catch (error) {
                    console.error('Token exchange failed:', error);
                    throw error;
                }
            }

            // Step 3: Get user pages
            async getUserPages() {
                if (!this.accessToken) {
                    throw new Error('No access token available');
                }

                try {
                    const response = await fetch(
                        `https://graph.facebook.com/v${this.config.apiVersion}/me/accounts?access_token=${this.accessToken}`
                    );
                    
                    const data = await response.json();
                    return data.data; // Returns array of pages
                } catch (error) {
                    console.error('Failed to get user pages:', error);
                    throw error;
                }
            }

            // Step 4: Create Live Video
            async createLiveVideo(pageId, pageAccessToken, streamData) {
                try {
                    const response = await fetch(
                        `https://graph.facebook.com/v${this.config.apiVersion}/${pageId}/live_videos`,
                        {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                access_token: pageAccessToken,
                                title: streamData.title,
                                description: streamData.description,
                                privacy: streamData.privacy || 'EVERYONE',
                                status: 'LIVE_NOW'
                            })
                        }
                    );

                    const data = await response.json();
                    return {
                        streamUrl: data.stream_url, // RTMP endpoint
                        streamKey: data.stream_key,  // Stream key
                        liveVideoId: data.id,
                        embedUrl: data.embed_html
                    };
                } catch (error) {
                    console.error('Failed to create live video:', error);
                    throw error;
                }
            }

            // Step 5: End Live Video
            async endLiveVideo(liveVideoId, pageAccessToken) {
                try {
                    const response = await fetch(
                        `https://graph.facebook.com/v${this.config.apiVersion}/${liveVideoId}`,
                        {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                access_token: pageAccessToken,
                                end_live_video: true
                            })
                        }
                    );

                    return await response.json();
                } catch (error) {
                    console.error('Failed to end live video:', error);
                    throw error;
                }
            }

            generateState() {
                return Math.random().toString(36).substring(2, 15);
            }

            waitForAuthCompletion() {
                return new Promise((resolve, reject) => {
                    // In a real implementation, you'd handle the OAuth callback
                    // This is a simplified version
                    setTimeout(() => {
                        resolve({ success: true, demo: true });
                    }, 2000);
                });
            }
        }

        // Initialize Facebook API
        const facebookAPI = new FacebookLiveAPI(SOCIAL_MEDIA_CONFIG.facebook);

        // Updated authentication function for real integration
        function authenticateWithPlatform(platform, card) {
            const statusElement = card.querySelector('.platform-status');
            
            if (statusElement) {
                statusElement.textContent = 'Connecting...';
            }
            
            if (platform === 'facebook') {
                // Real Facebook authentication
                showRealAuthModal(platform, async () => {
                    try {
                        // Step 1: Authenticate with Facebook
                        const authResult = await facebookAPI.authenticate();
                        
                        if (authResult.demo) {
                            // Demo mode - simulate success
                            handleAuthSuccess(platform);
                        } else {
                            // Real mode - continue with actual API calls
                            const pages = await facebookAPI.getUserPages();
                            showPageSelectionModal(pages, platform);
                        }
                    } catch (error) {
                        console.error('Facebook auth failed:', error);
                        handleAuthError(platform);
                    }
                });
            } else {
                // Other platforms - show demo modal
                showAuthModal(platform);
            }
        }

        function showRealAuthModal(platform, onProceed) {
            const authModal = document.createElement('div');
            authModal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 10001;">
                    <div style="background: linear-gradient(135deg, rgba(20, 20, 20, 0.95), rgba(40, 40, 40, 0.95)); border-radius: 20px; padding: 2rem; max-width: 600px; width: 90%; text-align: center; color: white; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h2 style="color: #00d4ff; margin-bottom: 1rem; font-size: 1.5rem;">üîê Facebook Live Integration</h2>
                        
                        <div style="background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; padding: 1rem; margin: 1rem 0; font-size: 0.9rem; line-height: 1.5; text-align: left;">
                            <strong>üîß Setup Required:</strong><br><br>
                            <strong>1. Facebook Developer Console:</strong><br>
                            ‚Ä¢ Create app at <a href="https://developers.facebook.com" target="_blank" style="color: #00d4ff;">developers.facebook.com</a><br>
                            ‚Ä¢ App ID: <code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">${SOCIAL_MEDIA_CONFIG.facebook.appId}</code><br><br>
                            
                            <strong>2. Required Permissions:</strong><br>
                            ${SOCIAL_MEDIA_CONFIG.facebook.scopes.map(scope => '‚Ä¢ ' + scope).join('<br>')}<br><br>
                            
                            <strong>3. OAuth Redirect URL:</strong><br>
                            ‚Ä¢ <code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">${SOCIAL_MEDIA_CONFIG.facebook.redirectUri}</code><br><br>
                            
                            <strong>4. Backend API Endpoint:</strong><br>
                            ‚Ä¢ <code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">/api/facebook/token</code> (for token exchange)<br>
                            ‚Ä¢ <code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">/api/facebook/live</code> (for live video creation)
                        </div>

                        <div style="background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 10px; padding: 1rem; margin: 1rem 0; font-size: 0.9rem;">
                            <strong>‚ö†Ô∏è Current Status:</strong> Demo Mode<br>
                            Replace configuration values with your actual Facebook App credentials to enable real streaming.
                        </div>

                        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
                            <button onclick="handleRealAuth('${platform}'); this.closest('div').parentElement.remove();" style="background: linear-gradient(135deg, #1877f2, #166fe5); border: none; color: white; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer;">
                                üöÄ Proceed with Demo
                            </button>
                            <button onclick="this.closest('div').parentElement.remove(); handleAuthError('${platform}');" style="background: linear-gradient(135deg, #f44336, #d32f2f); border: none; color: white; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer;">
                                ‚ùå Cancel
                            </button>
                        </div>

                        <div style="margin-top: 1.5rem; font-size: 0.8rem; color: rgba(255, 255, 255, 0.6); text-align: left;">
                            <strong>üìã Implementation Checklist:</strong><br>
                            ‚ñ° Create Facebook Developer Account<br>
                            ‚ñ° Create Facebook App with Live Video permissions<br>
                            ‚ñ° Configure OAuth redirect URLs<br>
                            ‚ñ° Set up backend token exchange endpoint<br>
                            ‚ñ° Implement RTMP streaming integration<br>
                            ‚ñ° Handle Facebook Live Video API calls<br>
                            ‚ñ° Add error handling and token refresh
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(authModal);
        }

        window.handleRealAuth = function(platform) {
            // In demo mode, simulate the full flow
            setTimeout(() => {
                handleAuthSuccess(platform);
                
                // Show additional info about what would happen in real implementation
                setTimeout(() => {
                    alert(`üì° In real implementation:\n\n` +
                          `1. User would be redirected to Facebook OAuth\n` +
                          `2. Facebook would return authorization code\n` +
                          `3. Backend would exchange code for access token\n` +
                          `4. App would get user's Facebook pages\n` +
                          `5. User selects page for streaming\n` +
                          `6. API creates live video with RTMP endpoint\n` +
                          `7. Teleprompter connects to RTMP stream\n` +
                          `8. Live video goes live on Facebook!`);
                }, 1000);
            }, 500);
        };
        window.showStreamModal = function() {
            console.log('Global showStreamModal called');
            const modal = document.getElementById('streamModal');
            if (modal) {
                modal.classList.add('show');
                console.log('Stream modal opened successfully');
            } else {
                console.error('Stream modal element not found!');
                alert('Stream modal not found. There may be an issue with the page.');
            }
        };

        window.hideStreamModal = function() {
            const modal = document.getElementById('streamModal');
            if (modal) {
                modal.classList.remove('show');
            }
        };

        window.selectPlatform = function(platform) {
            console.log('Platform selected:', platform);
            
            // Remove previous selection
            document.querySelectorAll('.platform-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Select new platform
            const card = document.querySelector(`[data-platform="${platform}"]`);
            if (card) {
                card.classList.add('selected');
                
                // Show connecting status
                const statusElement = card.querySelector('.platform-status');
                if (statusElement) {
                    statusElement.textContent = 'Connecting...';
                }
                
                // Start OAuth authentication process
                authenticateWithPlatform(platform, card);
            }
        };

        function authenticateWithPlatform(platform, card) {
            const statusElement = card.querySelector('.platform-status');
            
            // Show connecting status
            if (statusElement) {
                statusElement.textContent = 'Connecting...';
            }
            
            // Show authentication modal
            showAuthModal(platform);
        }

        function showAuthModal(platform, onSuccess, onError) {
            // Create authentication modal
            const authModal = document.createElement('div');
            authModal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 10001;">
                    <div style="background: linear-gradient(135deg, rgba(20, 20, 20, 0.95), rgba(40, 40, 40, 0.95)); border-radius: 20px; padding: 2rem; max-width: 500px; width: 90%; text-align: center; color: white; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h2 style="color: #00d4ff; margin-bottom: 1rem; font-size: 1.5rem;">üîê Connect to ${platform.charAt(0).toUpperCase() + platform.slice(1)}</h2>
                        
                        <div style="background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; padding: 1rem; margin: 1rem 0; font-size: 0.9rem; line-height: 1.5;">
                            <strong>‚ö†Ô∏è Demo Mode:</strong> This is a demonstration of the streaming setup process. In a real implementation, you would be redirected to ${platform.charAt(0).toUpperCase() + platform.slice(1)} to authorize the application.
                        </div>

                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 10px; padding: 1rem; margin: 1rem 0; text-align: left; font-size: 0.9rem;">
                            <strong>Required Permissions:</strong><br>
                            ${getPlatformPermissions(platform)}
                        </div>

                        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
                            <button onclick="handleAuthSuccess('${platform}'); this.closest('div').parentElement.remove();" style="background: linear-gradient(135deg, #4CAF50, #45a049); border: none; color: white; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer;">
                                ‚úÖ Simulate Connection
                            </button>
                            <button onclick="handleAuthError('${platform}'); this.closest('div').parentElement.remove();" style="background: linear-gradient(135deg, #f44336, #d32f2f); border: none; color: white; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer;">
                                ‚ùå Cancel
                            </button>
                        </div>

                        <div style="margin-top: 1rem; font-size: 0.8rem; color: rgba(255, 255, 255, 0.6);">
                            <strong>For Real Implementation:</strong><br>
                            ‚Ä¢ Register app with ${platform.charAt(0).toUpperCase() + platform.slice(1)} Developer Platform<br>
                            ‚Ä¢ Configure OAuth redirect URLs<br>
                            ‚Ä¢ Implement secure token handling<br>
                            ‚Ä¢ Add live streaming API integration
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(authModal);
        }

        // Global handlers for auth modal buttons
        window.handleAuthSuccess = function(platform) {
            console.log('Auth success for:', platform);
            
            // Find the platform card and update status
            const card = document.querySelector(`[data-platform="${platform}"]`);
            if (card) {
                const statusElement = card.querySelector('.platform-status');
                if (statusElement) {
                    statusElement.textContent = '‚úÖ Connected';
                    statusElement.style.color = '#4CAF50';
                }
            }
            
            // Show stream settings
            const settings = document.getElementById('streamSettings');
            const startBtn = document.getElementById('startStreamBtn');
            
            if (settings) settings.style.display = 'block';
            if (startBtn) {
                startBtn.style.display = 'block';
                startBtn.textContent = `üî¥ Go Live on ${platform.charAt(0).toUpperCase() + platform.slice(1)}`;
            }
            
            // Set platform-specific defaults
            setPlatformDefaults(platform);
            
            alert(`‚úÖ Successfully connected to ${platform.charAt(0).toUpperCase() + platform.slice(1)}! You can now configure your stream settings.`);
        };

        window.handleAuthError = function(platform) {
            console.log('Auth cancelled for:', platform);
            
            // Find the platform card and reset
            const card = document.querySelector(`[data-platform="${platform}"]`);
            if (card) {
                card.classList.remove('selected');
                const statusElement = card.querySelector('.platform-status');
                if (statusElement) {
                    statusElement.textContent = 'Click to Connect';
                    statusElement.style.color = '';
                }
            }
            
            alert(`‚ùå Connection to ${platform.charAt(0).toUpperCase() + platform.slice(1)} was cancelled.`);
        };

        function getPlatformPermissions(platform) {
            const permissions = {
                facebook: '‚Ä¢ Publish videos to your page<br>‚Ä¢ Manage posts and content<br>‚Ä¢ Access page insights<br>‚Ä¢ Create live streams',
                youtube: '‚Ä¢ Upload and manage videos<br>‚Ä¢ Create live streams<br>‚Ä¢ Access channel analytics<br>‚Ä¢ Manage live chat',
                instagram: '‚Ä¢ Access profile information<br>‚Ä¢ Publish photos and videos<br>‚Ä¢ Create live streams<br>‚Ä¢ Access insights',
                tiktok: '‚Ä¢ Upload videos to your account<br>‚Ä¢ Access profile information<br>‚Ä¢ Create live streams<br>‚Ä¢ View analytics',
                twitch: '‚Ä¢ Manage broadcast settings<br>‚Ä¢ Control stream information<br>‚Ä¢ Access channel data<br>‚Ä¢ Manage commercial breaks'
            };
            return permissions[platform] || '‚Ä¢ Platform-specific permissions';
        }

        function setPlatformDefaults(platform) {
            const titleInput = document.getElementById('streamTitle');
            const descInput = document.getElementById('streamDescription');
            
            if (titleInput) {
                const titles = {
                    facebook: 'Live with Professional Teleprompter - Join the Conversation!',
                    youtube: 'Professional Live Tutorial - Advanced Teleprompter Setup',
                    tiktok: 'Going Live! Ask Me Anything - Professional Setup',
                    instagram: 'Behind the Scenes Live Session - Professional Content Creation',
                    twitch: 'Just Chatting - Professional Streaming Setup Demo'
                };
                titleInput.value = titles[platform] || 'Professional Live Stream';
            }
            
            if (descInput) {
                const descriptions = {
                    facebook: 'Join me for a live session using professional teleprompter technology! Perfect for content creators and streamers.',
                    youtube: 'Learn how to use professional teleprompter software for better content creation. Voice commands, multiple languages, and streaming integration.',
                    tiktok: 'Live streaming with professional teleprompter setup! Great for content creators and influencers.',
                    instagram: 'Behind the scenes look at professional content creation with advanced teleprompter technology.',
                    twitch: 'Chatting about professional streaming setups and teleprompter technology for content creators.'
                };
                descInput.value = descriptions[platform] || 'Professional live stream with teleprompter technology.';
            }
        }

        window.startStream = function() {
            alert('üî¥ Starting live stream! (This is a demo - in a real app this would connect to the platform\'s streaming API)');
            const liveStatus = document.getElementById('liveStatus');
            const startBtn = document.getElementById('startStreamBtn');
            const stopBtn = document.getElementById('stopStreamBtn');
            
            if (liveStatus) liveStatus.style.display = 'block';
            if (startBtn) startBtn.style.display = 'none';
            if (stopBtn) stopBtn.style.display = 'block';
        };

        window.stopStream = function() {
            if (confirm('Stop the live stream?')) {
                const liveStatus = document.getElementById('liveStatus');
                const startBtn = document.getElementById('startStreamBtn');
                const stopBtn = document.getElementById('stopStreamBtn');
                
                if (liveStatus) liveStatus.style.display = 'none';
                if (startBtn) startBtn.style.display = 'block';
                if (stopBtn) stopBtn.style.display = 'none';
                
                alert('‚èπÔ∏è Stream stopped');
            }
        };

        // Initialize the teleprompter
        const teleprompter = new ProfessionalTeleprompter();
        
        // Make teleprompter globally available for debugging
        window.teleprompter = teleprompter;
        
        // Add a simple test function for the Go Live button
        window.testGoLive = function() {
            console.log('Testing Go Live function...');
            const modal = document.getElementById('streamModal');
            if (modal) {
                modal.classList.add('show');
                console.log('Stream modal should be visible now');
            } else {
                console.error('Stream modal not found in DOM');
            }
        };

        // Debug: Log all found elements
        console.log('Teleprompter initialized. Found elements:');
        Object.keys(teleprompter.elements).forEach(key => {
            console.log(`${key}:`, !!teleprompter.elements[key]);
        });

        // Auto-save script periodically
        setInterval(() => {
            if (teleprompter.elements && teleprompter.elements.scriptInput && teleprompter.elements.scriptInput.value.trim()) {
                teleprompter.saveScript();
            }
        }, 30000); // Save every 30 seconds
    </script>
</body>
</html>
                        <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Voice Teleprompter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: #0a0a0a;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            z-index: 1000;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #00d4ff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .btn, select.btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            font-weight: 500;
            white-space: nowrap;
        }

        .btn:hover, select.btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .btn.active {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            border-color: #00d4ff;
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }

        .btn.recording {
            background: linear-gradient(135deg, #ff4757, #c44569);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
            50% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
        }

        .main-container {
            flex: 1;
            display: flex;
            height: calc(100vh - 80px);
            position: relative;
        }

        .sidebar {
            width: 350px;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .script-section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #00d4ff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        #scriptInput {
            width: 100%;
            min-height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem;
            color: white;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            font-family: 'SF Pro Display', -apple-system, sans-serif;
        }

        #scriptInput:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
            background: rgba(255, 255, 255, 0.08);
        }

        #scriptInput::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        #scriptInput.arabic {
            direction: rtl;
            text-align: right;
            font-family: 'Arial', 'Tahoma', sans-serif;
        }

        .script-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .script-controls .btn {
            padding: 0.5rem;
            font-size: 0.8rem;
        }

        .teleprompter-view {
            flex: 1;
            background: #000;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .teleprompter-screen {
            flex: 1;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 2rem;
        }

        .teleprompter-screen.transparent-mode {
            background: rgba(0, 0, 0, 0.1);
        }

        .teleprompter-text {
            color: #ffffff;
            font-size: 3rem;
            line-height: 1.4;
            text-align: center;
            font-weight: 400;
            white-space: pre-wrap;
            word-wrap: break-word;
            transition: transform 0.1s linear;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
            max-width: 90%;
            letter-spacing: 0.02em;
        }

        .teleprompter-text.arabic {
            direction: rtl;
            text-align: right;
            font-family: 'Arial', 'Tahoma', sans-serif;
            font-size: 3.2rem;
        }

        .teleprompter-screen.mirror-mode {
            transform: scaleX(-1);
        }

        .teleprompter-text.transparent-mode {
            text-shadow: 2px 2px 12px rgba(0, 0, 0, 1);
        }

        .bottom-controls {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.8rem 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .speed-slider {
            width: 200px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 212, 255, 0.3);
        }

        .timer-display {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-family: 'SF Mono', monospace;
            font-weight: 600;
            color: #00d4ff;
        }

        .status-indicators {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .status-dot.active {
            background: #00d4ff;
            box-shadow: 0 0 12px rgba(0, 212, 255, 0.6);
            animation: pulse-dot 2s infinite;
        }

        .status-dot.recording {
            background: #ff4757;
            animation: pulse-dot 1s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .voice-commands-panel {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem;
            margin-top: 1rem;
        }

        .voice-commands-panel h4 {
            color: #00d4ff;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .commands-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.5rem;
            font-size: 0.8rem;
        }

        .command-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            border-left: 3px solid #00d4ff;
            color: rgba(255, 255, 255, 0.8);
        }

        .command-item strong {
            color: #00d4ff;
        }

        .cloud-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.8rem;
            margin-top: 1rem;
        }

        .cloud-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse-dot 2s infinite;
        }

        .cloud-dot.syncing {
            background: #ff9800;
        }

        .cloud-dot.offline {
            background: #f44336;
        }

        /* Fullscreen Mode */
        .fullscreen-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
        }

        .fullscreen-mode .sidebar {
            display: none;
        }

        .fullscreen-mode .teleprompter-screen {
            padding: 4rem 2rem;
        }

        .fullscreen-mode .teleprompter-text {
            font-size: 4rem;
        }

        /* Platform Themes */
        .youtube-theme { --accent: #ff0000; }
        .facebook-theme { --accent: #1877f2; }
        .tiktok-theme { --accent: #fe2c55; }
        .instagram-theme { --accent: #e1306c; }
        .twitch-theme { --accent: #9146ff; }

        .themed .btn.active,
        .themed .logo,
        .themed .script-section h3,
        .themed .timer-display,
        .themed .status-dot.active {
            color: var(--accent, #00d4ff) !important;
            border-color: var(--accent, #00d4ff) !important;
        }

        .themed .btn.active {
            background: linear-gradient(135deg, var(--accent, #00d4ff), color-mix(in srgb, var(--accent, #00d4ff) 70%, #000));
        }

        /* Login Modal */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .login-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .login-content {
            background: linear-gradient(135deg, rgba(20, 20, 20, 0.95), rgba(40, 40, 40, 0.95));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            width: 90%;
            max-width: 400px;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            position: relative;
        }

        .login-modal.show .login-content {
            transform: scale(1);
        }

        .login-content h2 {
            color: #00d4ff;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .login-content p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .social-login-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-decoration: none;
        }

        .social-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Stream Modal */
        .stream-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .stream-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .stream-content {
            background: linear-gradient(135deg, rgba(20, 20, 20, 0.95), rgba(40, 40, 40, 0.95));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            width: 95%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .stream-modal.show .stream-content {
            transform: scale(1);
        }

        .stream-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .stream-header h2 {
            color: #00d4ff;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .platform-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            margin-bottom: 1rem;
        }

        .platform-card:hover {
            border-color: #00d4ff;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .platform-card.selected {
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
        }

        .platform-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            margin: 0.5rem 0;
        }

        .platform-status {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: absolute;
                top: 0;
                bottom: 0;
                z-index: 100;
                transform: translateX(-100%);
            }

            .sidebar.visible {
                transform: translateX(0);
            }

            .teleprompter-text {
                font-size: 2rem;
            }

            .header {
                padding: 0.5rem 1rem;
            }

            .controls {
                gap: 0.3rem;
                justify-content: center;
            }

            .btn {
                padding: 0.5rem 0.8rem;
                font-size: 0.8rem;
            }

            .user-section {
                order: -1;
                width: 100%;
                justify-content: center;
                margin-bottom: 0.5rem;
            }
        }

        /* Enhanced Professional Features - Inspired by Imaginary Teleprompter */
        .teleprompter-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        .focus-line {
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            height: 3px;
            background: linear-gradient(90deg, transparent, #00d4ff, transparent);
            transform: translateY(-1px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .focus-line.active {
            opacity: 0.8;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .reading-area {
            position: absolute;
            left: 0;
            right: 0;
            top: 40%;
            height: 20%;
            background: linear-gradient(180deg, 
                rgba(0, 212, 255, 0.1) 0%, 
                rgba(0, 212, 255, 0.2) 50%, 
                rgba(0, 212, 255, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .reading-area.active {
            opacity: 0.3;
        }

        /* Countdown Timer */
        .countdown-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 15rem;
            font-weight: bold;
            color: #00d4ff;
            text-shadow: 0 0 50px rgba(0, 212, 255, 0.8);
            z-index: 1000;
            display: none;
            animation: countdownPulse 1s ease-in-out;
        }

        @keyframes countdownPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
        }

        /* Marker System */
        .markers-panel {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 1rem;
            max-height: 60%;
            overflow-y: auto;
            min-width: 200px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .markers-panel.active {
            opacity: 1;
        }

        .marker-item {
            background: rgba(255, 255, 255, 0.1);
            margin: 0.5rem 0;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
            font-size: 0.9rem;
        }

        .marker-item:hover {
            background: rgba(0, 212, 255, 0.3);
        }

        .marker-item.active {
            background: rgba(0, 212, 255, 0.5);
        }

        /* Advanced Controls */
        .advanced-controls {
            display: none;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .advanced-controls.active {
            display: block;
        }

        .control-group {
            margin: 1rem 0;
        }

        .control-group label {
            display: block;
            color: #00d4ff;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .control-range {
            width: 100%;
            margin: 0.5rem 0;
        }

        /* Professional Themes */
        .theme-selector {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .theme-option.active {
            border-color: #00d4ff;
            transform: scale(1.1);
        }

        .theme-dark { background: linear-gradient(135deg, #000, #333); }
        .theme-light { background: linear-gradient(135deg, #fff, #f0f0f0); }
        .theme-blue { background: linear-gradient(135deg, #000080, #0066cc); }
        .theme-green { background: linear-gradient(135deg, #004d00, #00cc00); }
        .theme-red { background: linear-gradient(135deg, #660000, #cc0000); }

        /* Improved Mobile Responsiveness */
        @media (max-width: 768px) {
            .countdown-overlay {
                font-size: 8rem;
            }
            
            .markers-panel {
                right: 5px;
                min-width: 150px;
                padding: 0.5rem;
            }
            
            .advanced-controls {
                padding: 0.5rem;
            }
        }

        /* Auto-scroll Enhancement */
        .scroll-progress {
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            z-index: 10;
        }

        .scroll-progress-bar {
            width: 100%;
            background: linear-gradient(180deg, #00d4ff, #0099cc);
            transition: height 0.1s ease;
            height: 0%;
        }

        /* Enhanced Status Indicators */
        .status-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 5px;
        }

        .wpm-display {
            font-family: 'SF Mono', monospace;
            color: #00d4ff;
            font-weight: 600;
        }

        .recording-indicator {
            width: 12px;
            height: 12px;
            background: #ff4757;
            border-radius: 50%;
            animation: pulse-dot 1s infinite;
        }
        .feedback-notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            z-index: 10000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.3);
        }

        .feedback-notification.show {
            transform: translateX(0);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            üé¨ Professional Teleprompter
        </div>
        <div class="user-section" id="userSection">
            <button class="btn" onclick="showLoginModal()">üë§ Sign In</button>
        </div>
        <div class="controls">
            <button class="btn" id="toggleSidebar" onclick="toggleSidebar()">üìù Script</button>
            <select class="btn" id="languageSelect" onchange="changeLanguage(this.value)">
                <option value="en-US">üá∫üá∏ English</option>
                <option value="ar-SA">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            </select>
            <select class="btn" id="platformSelect" onchange="changePlatform(this.value)">
                <option value="general">üì± General</option>
                <option value="youtube">üì∫ YouTube</option>
                <option value="facebook">üìò Facebook</option>
                <option value="tiktok">üéµ TikTok</option>
                <option value="instagram">üì∑ Instagram</option>
                <option value="twitch">üü£ Twitch</option>
            </select>
            <button class="btn" id="voiceBtn" onclick="toggleVoiceControl()">üé§ Voice Control</button>
            <button class="btn" id="playBtn" onclick="playTeleprompter()">‚ñ∂Ô∏è Play</button>
            <button class="btn" id="pauseBtn" onclick="pauseTeleprompter()">‚è∏Ô∏è Pause</button>
            <button class="btn" id="resetBtn" onclick="resetTeleprompter()">üîÑ Reset</button>
            <button class="btn" id="mirrorBtn" onclick="toggleMirror()">ü™û Mirror</button>
            <button class="btn" id="transparentBtn" onclick="toggleTransparent()">üëª Transparent</button>
            <button class="btn" id="fullscreenBtn" onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
            <button class="btn" id="streamBtn" onclick="showStreamModal()">üî¥ Go Live</button>
        </div>
    </div>

    <div class="main-container" id="mainContainer">
        <div class="sidebar" id="sidebar">
            <div class="script-section">
                <h3>üìù Script Editor</h3>
                <textarea id="scriptInput" oninput="updateScript()" placeholder="üé¨ Professional Script Editor

‚ú® Voice Commands Available:
‚Ä¢ "play" or "start" - Begin scrolling
‚Ä¢ "pause" or "stop" - Pause scrolling  
‚Ä¢ "faster" or "speed up" - Increase speed
‚Ä¢ "slower" or "slow down" - Decrease speed
‚Ä¢ "scroll up" or "up" - Manual scroll up
‚Ä¢ "scroll down" or "down" - Manual scroll down
‚Ä¢ "reset" or "beginning" - Return to start
‚Ä¢ "mirror on/off" - Toggle mirror mode
‚Ä¢ "go live" - Open streaming setup

üéØ Perfect for:
‚Ä¢ YouTube videos and tutorials
‚Ä¢ Facebook Live streaming  
‚Ä¢ TikTok content creation
‚Ä¢ Instagram Live sessions
‚Ä¢ Twitch streaming
‚Ä¢ Professional presentations

üì± Pro Tips:
‚Ä¢ Use Mirror Mode for front-facing cameras
‚Ä¢ Enable Transparent Mode for OBS overlays
‚Ä¢ Voice commands work silently during streaming
‚Ä¢ Practice commands before going live

Ready to create professional content? Enter your script below! üöÄ"></textarea>
                
                <div class="script-controls">
                    <button class="btn" onclick="importScript()">üìÅ Import</button>
                    <button class="btn" onclick="exportScript()">üíæ Export</button>
                    <button class="btn" onclick="clearScript()">üóëÔ∏è Clear</button>
                    <button class="btn" onclick="saveScript()">üíæ Save</button>
                </div>

                <div class="cloud-status" id="cloudStatus">
                    <div class="cloud-dot offline" id="cloudDot"></div>
                    <span id="cloudText">Offline Mode</span>
                </div>
            </div>

            <div class="voice-commands-panel">
                <h4>üé§ Voice Commands</h4>
                <div class="commands-grid" id="commandsGrid">
                    <div class="command-item"><strong>"play"</strong> Start</div>
                    <div class="command-item"><strong>"pause"</strong> Stop</div>
                    <div class="command-item"><strong>"faster"</strong> Speed up</div>
                    <div class="command-item"><strong>"slower"</strong> Slow down</div>
                    <div class="command-item"><strong>"up"</strong> Scroll up</div>
                    <div class="command-item"><strong>"down"</strong> Scroll down</div>
                    <div class="command-item"><strong>"reset"</strong> Beginning</div>
                    <div class="command-item"><strong>"mirror"</strong> Flip text</div>
                </div>
            </div>
        </div>

        <div class="teleprompter-view">
            <div class="teleprompter-screen" id="teleprompterScreen">
                <!-- Professional overlay system inspired by Imaginary Teleprompter -->
                <div class="teleprompter-overlay">
                    <div class="focus-line" id="focusLine"></div>
                    <div class="reading-area" id="readingArea"></div>
                    <div class="scroll-progress">
                        <div class="scroll-progress-bar" id="scrollProgressBar"></div>
                    </div>
                </div>
                
                <!-- Countdown for professional starts -->
                <div class="countdown-overlay" id="countdownOverlay">3</div>
                
                <!-- Markers panel for script navigation -->
                <div class="markers-panel" id="markersPanel">
                    <h4 style="color: #00d4ff; margin-bottom: 0.5rem;">üìç Markers</h4>
                    <div id="markersList"></div>
                    <button onclick="addMarker()" style="background: #00d4ff; border: none; color: white; padding: 0.3rem 0.6rem; border-radius: 5px; margin-top: 0.5rem; cursor: pointer;">+ Add Marker</button>
                </div>
                
                <div class="teleprompter-text" id="teleprompterText">
                    Welcome to Professional Teleprompter
                    
                    Enhanced with features from Imaginary Teleprompter - the industry standard.
                    
                    New features: Focus line, reading area, markers, countdown timer, and advanced controls.
                    
                    Perfect for professional broadcasting and content creation! üé•
                </div>
            </div>

            <div class="bottom-controls">
                <!-- Enhanced controls with professional features -->
                <div class="status-bar">
                    <div class="wpm-display">
                        <span id="wpmCounter">0</span> WPM
                    </div>
                    <div class="recording-indicator" id="recordingIndicator" style="display: none;"></div>
                </div>
                
                <div class="speed-control">
                    <span>üêå</span>
                    <input type="range" class="speed-slider" id="speedSlider" min="0.1" max="5" step="0.1" value="1" oninput="updateSpeed(this.value)">
                    <span>üöÄ</span>
                    <span id="speedDisplay">1.0x</span>
                </div>

                <div class="timer-display" id="timerDisplay">00:00</div>

                <div class="status-indicators">
                    <div class="status-dot" id="voiceStatus" title="Voice Control"></div>
                    <div class="status-dot" id="playStatus" title="Playback"></div>
                    <div class="status-dot" id="recordStatus" title="Recording"></div>
                </div>

                <button class="btn" onclick="toggleAdvancedControls()" id="advancedToggle">‚öôÔ∏è Advanced</button>
            </div>

            <!-- Advanced Professional Controls -->
            <div class="advanced-controls" id="advancedControls">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div class="control-group">
                        <label>üìè Prompt Width</label>
                        <input type="range" class="control-range" id="promptWidth" min="60" max="100" value="90" onchange="updatePromptWidth(this.value)">
                        <small style="color: rgba(255,255,255,0.7);">Adjust text width for better readability</small>
                    </div>
                    
                    <div class="control-group">
                        <label>üéØ Focus Line</label>
                        <input type="checkbox" id="focusLineToggle" onchange="toggleFocusLine(this.checked)">
                        <small style="color: rgba(255,255,255,0.7);">Show reading guide line</small>
                    </div>
                    
                    <div class="control-group">
                        <label>üìñ Reading Area</label>
                        <input type="checkbox" id="readingAreaToggle" onchange="toggleReadingArea(this.checked)">
                        <small style="color: rgba(255,255,255,0.7);">Highlight reading zone</small>
                    </div>
                    
                    <div class="control-group">
                        <label>‚è±Ô∏è Countdown Timer</label>
                        <input type="number" id="countdownDuration" min="0" max="10" value="3" onchange="updateCountdownDuration(this.value)">
                        <small style="color: rgba(255,255,255,0.7);">Seconds before auto-start</small>
                    </div>
                    
                    <div class="control-group">
                        <label>üìç Markers</label>
                        <input type="checkbox" id="markersToggle" onchange="toggleMarkers(this.checked)">
                        <small style="color: rgba(255,255,255,0.7);">Show script markers panel</small>
                    </div>
                    
                    <div class="control-group">
                        <label>üé® Theme</label>
                        <div class="theme-selector">
                            <div class="theme-option theme-dark active" onclick="setTheme('dark')" title="Dark"></div>
                            <div class="theme-option theme-light" onclick="setTheme('light')" title="Light"></div>
                            <div class="theme-option theme-blue" onclick="setTheme('blue')" title="Blue"></div>
                            <div class="theme-option theme-green" onclick="setTheme('green')" title="Green"></div>
                            <div class="theme-option theme-red" onclick="setTheme('red')" title="Red"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="login-modal" id="loginModal">
        <div class="login-content">
            <button class="close-btn" id="closeLogin">‚úï</button>
            <h2>üé¨ Sign In to Sync</h2>
            <p>Sign in to sync your scripts across devices and access premium features</p>
            
            <div class="social-login-buttons">
                <button class="social-btn" onclick="socialLogin('google')">
                    <span>üîç</span>
                    <span>Continue with Google</span>
                </button>
                
                <button class="social-btn" onclick="socialLogin('facebook')">
                    <span>üìò</span>
                    <span>Continue with Facebook</span>
                </button>
                
                <button class="social-btn" onclick="socialLogin('apple')">
                    <span>üçé</span>
                    <span>Sign in with Apple</span>
                </button>
            </div>
            
            <p style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.5);">
                ‚ú® Premium features: Cloud sync, unlimited scripts, advanced voice commands
            </p>
        </div>
    </div>

    <!-- Stream Modal -->
    <div class="stream-modal" id="streamModal">
        <div class="stream-content">
            <div class="stream-header">
                <h2>üî¥ Go Live</h2>
                <button class="close-btn" onclick="hideStreamModal()">‚úï</button>
            </div>

            <div style="background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; padding: 1rem; margin-bottom: 2rem; color: rgba(255, 255, 255, 0.9); font-size: 0.9rem; line-height: 1.5;">
                ‚ú® <strong>Pro Tip:</strong> Your teleprompter will overlay on your stream! Use voice commands to control scrolling while live without interrupting your broadcast.
            </div>

            <div class="platform-card youtube" data-platform="youtube" onclick="selectPlatform('youtube')">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üì∫</div>
                <div class="platform-name">YouTube Live</div>
                <div class="platform-status">Click to Connect</div>
            </div>

            <div class="platform-card facebook" data-platform="facebook" onclick="selectPlatform('facebook')">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üìò</div>
                <div class="platform-name">Facebook Live</div>
                <div class="platform-status">Click to Connect</div>
            </div>

            <div class="platform-card tiktok" data-platform="tiktok">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üéµ</div>
                <div class="platform-name">TikTok